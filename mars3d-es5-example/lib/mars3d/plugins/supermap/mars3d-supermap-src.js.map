{"version":3,"sources":["webpack://mars3dSupermap/webpack/universalModuleDefinition","webpack://mars3dSupermap/webpack/bootstrap","webpack://mars3dSupermap/external \"mars3d\"","webpack://mars3dSupermap/external {\"commonjs2\":\"mars3d-cesium\",\"amd\":\"mars3d-cesium\",\"commonjs\":\"mars3d-cesium\",\"root\":\"Cesium\"}","webpack://mars3dSupermap/./node_modules/@babel/runtime/helpers/getPrototypeOf.js","webpack://mars3dSupermap/./node_modules/@babel/runtime/helpers/classCallCheck.js","webpack://mars3dSupermap/./node_modules/@babel/runtime/helpers/createClass.js","webpack://mars3dSupermap/./node_modules/@babel/runtime/helpers/inherits.js","webpack://mars3dSupermap/./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js","webpack://mars3dSupermap/./node_modules/@babel/runtime/helpers/get.js","webpack://mars3dSupermap/./node_modules/@babel/runtime/helpers/defineProperty.js","webpack://mars3dSupermap/./node_modules/@babel/runtime/helpers/setPrototypeOf.js","webpack://mars3dSupermap/./node_modules/@babel/runtime/helpers/typeof.js","webpack://mars3dSupermap/./node_modules/@babel/runtime/helpers/assertThisInitialized.js","webpack://mars3dSupermap/./node_modules/@babel/runtime/helpers/superPropBase.js","webpack://mars3dSupermap/./src/supermap/S3MLayer.js","webpack://mars3dSupermap/./src/supermap/SmImgLayer.js","webpack://mars3dSupermap/./src/supermap/SmMvtLayer.js","webpack://mars3dSupermap/./src/index.js"],"names":["BaseLayer","mars3d","S3MLayer","_layerArr","options","s3mOptions","value","key","val","Cesium","fromCssColorString","Number","i","length","layer","promise","layername","_map","scene","addS3MTilesLayerByScp","url","name","autoSetVie","flyTo","cullEnabled","open","sceneName","smLayer","Array","isArray","isS3M","position","alt","style3D","bottomAltitude","refresh","flyToByAnimationEnd","dataUrl","ql","setQueryParameter","dataSourceName","split","dataSetName","isMerge","selectEnabled","error","showError","visible","show","item","fillForeColor","alpha","center","setCameraView","extent","flyToExtent","register","BaseTileLayer","SmImgLayer","createImageryProvider","transparentBackColor","_imageryLayer","getCesiumColor","transparentBackColorTolerance","converOptions","layerType","registerImageryProvider","SmMvtLayer","_mvtLayer","addVectorTilesMap","layerReadyPromise","readyPromise","data","handler","canvas","setInputAction","event","getCurrentMousePosition","features","queryRenderedFeatures","filter","reduce","memo","result","attr","feature","properties","content","getPopupForConfig","openPopup","LEFT_CLICK","parseFloat","camera","destination","rectangle"],"mappings":";;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,O;QCVA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;;QAEA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;;;QAGA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;QACA,0CAA0C,gCAAgC;QAC1E;QACA;;QAEA;QACA;QACA;QACA,wDAAwD,kBAAkB;QAC1E;QACA,iDAAiD,cAAc;QAC/D;;QAEA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA,yCAAyC,iCAAiC;QAC1E,gHAAgH,mBAAmB,EAAE;QACrI;QACA;;QAEA;QACA;QACA;QACA,2BAA2B,0BAA0B,EAAE;QACvD,iCAAiC,eAAe;QAChD;QACA;QACA;;QAEA;QACA,sDAAsD,+DAA+D;;QAErH;QACA;;;QAGA;QACA;;;;;;;AClFA,gD;;;;;;ACAA,gD;;;;;;ACAA;AACA;AACA;AACA,GAAG;AACH;AACA;;AAEA,+G;;;;;;ACPA;AACA;AACA;AACA;AACA;;AAEA,+G;;;;;;ACNA;AACA,iBAAiB,kBAAkB;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;;AAEA,4G;;;;;;ACnBA,qBAAqB,mBAAO,CAAC,CAAqB;;AAElD;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,GAAG;AACH;AACA;;AAEA,yG;;;;;;ACpBA,cAAc,mBAAO,CAAC,EAA+B;;AAErD,4BAA4B,mBAAO,CAAC,EAA4B;;AAEhE;AACA;AACA;AACA,GAAG;AACH;AACA;;AAEA;AACA;;AAEA,0H;;;;;;ACdA,oBAAoB,mBAAO,CAAC,EAAoB;;AAEhD;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,KAAK;AACL;;AAEA;AACA;;AAEA,oG;;;;;;ACtBA;AACA;AACA;A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","file":"mars3d-supermap-src.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"mars3d\"), require(\"mars3d-cesium\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"mars3dSupermap\", [\"mars3d\", \"mars3d-cesium\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"mars3dSupermap\"] = factory(require(\"mars3d\"), require(\"mars3d-cesium\"));\n\telse\n\t\troot[\"mars3dSupermap\"] = factory(root[\"mars3d\"], root[\"Cesium\"]);\n})(window, function(__WEBPACK_EXTERNAL_MODULE__0__, __WEBPACK_EXTERNAL_MODULE__1__) {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 13);\n","module.exports = __WEBPACK_EXTERNAL_MODULE__0__;","module.exports = __WEBPACK_EXTERNAL_MODULE__1__;","function _getPrototypeOf(o) {\n  module.exports = _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  }, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;\n  return _getPrototypeOf(o);\n}\n\nmodule.exports = _getPrototypeOf, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nmodule.exports = _classCallCheck, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","function _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  Object.defineProperty(Constructor, \"prototype\", {\n    writable: false\n  });\n  return Constructor;\n}\n\nmodule.exports = _createClass, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","var setPrototypeOf = require(\"./setPrototypeOf.js\");\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  Object.defineProperty(subClass, \"prototype\", {\n    value: Object.create(superClass && superClass.prototype, {\n      constructor: {\n        value: subClass,\n        writable: true,\n        configurable: true\n      }\n    }),\n    writable: false\n  });\n  if (superClass) setPrototypeOf(subClass, superClass);\n}\n\nmodule.exports = _inherits, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","var _typeof = require(\"@babel/runtime/helpers/typeof\")[\"default\"];\n\nvar assertThisInitialized = require(\"./assertThisInitialized.js\");\n\nfunction _possibleConstructorReturn(self, call) {\n  if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {\n    return call;\n  } else if (call !== void 0) {\n    throw new TypeError(\"Derived constructors may only return object or undefined\");\n  }\n\n  return assertThisInitialized(self);\n}\n\nmodule.exports = _possibleConstructorReturn, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","var superPropBase = require(\"./superPropBase.js\");\n\nfunction _get() {\n  if (typeof Reflect !== \"undefined\" && Reflect.get) {\n    module.exports = _get = Reflect.get, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;\n  } else {\n    module.exports = _get = function _get(target, property, receiver) {\n      var base = superPropBase(target, property);\n      if (!base) return;\n      var desc = Object.getOwnPropertyDescriptor(base, property);\n\n      if (desc.get) {\n        return desc.get.call(arguments.length < 3 ? target : receiver);\n      }\n\n      return desc.value;\n    }, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;\n  }\n\n  return _get.apply(this, arguments);\n}\n\nmodule.exports = _get, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nmodule.exports = _defineProperty, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","function _setPrototypeOf(o, p) {\n  module.exports = _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  }, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;\n  return _setPrototypeOf(o, p);\n}\n\nmodule.exports = _setPrototypeOf, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","function _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  return (module.exports = _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) {\n    return typeof obj;\n  } : function (obj) {\n    return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n  }, module.exports.__esModule = true, module.exports[\"default\"] = module.exports), _typeof(obj);\n}\n\nmodule.exports = _typeof, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","function _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}\n\nmodule.exports = _assertThisInitialized, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","var getPrototypeOf = require(\"./getPrototypeOf.js\");\n\nfunction _superPropBase(object, property) {\n  while (!Object.prototype.hasOwnProperty.call(object, property)) {\n    object = getPrototypeOf(object);\n    if (object === null) break;\n  }\n\n  return object;\n}\n\nmodule.exports = _superPropBase, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","import * as Cesium from \"cesium\";\nimport * as mars3d from \"mars3d\";\n\nlet BaseLayer = mars3d.layer.BaseLayer;\n\n/**\n * 超图S3M三维模型图层,\n * 【需要引入  mars3d-supermap 插件库】\n *\n * @param {Object} [options] 参数对象，包括以下：\n * @param {String} options.url supermap的S3M服务地址,示例：\"url\": \"http://www.supermapol.com/realspace/services/3D-Olympic/rest/realspace\"\n * @param {String} [options.layername] 指定图层名称,未指定时，打开iserver场景服务下所有图层\n * @param {String} [options.sceneName] 工作空间中有多个场景，需要指定场景名称；设置为undefined，默认打开第一个\n * @param {Object} [options.s3mOptions] [S3M支持的参数]{@link http://support.supermap.com.cn:8090/webgl/docs/Documentation/S3MTilesLayer.html?classFilter=S3MTilesLayer} ,示例： {\"selectEnabled\":false},\n * @param {Object} [options.position] 模型新的中心点位置（移动模型）\n * @param {Number} options.position.alt 获取或设置底部高程。（单位：米）\n *\n * @param {String|Number} [options.id = uuid()] 图层id标识\n * @param {String|Number} [options.pid = -1] 图层父级的id，一般图层管理中使用\n * @param {String} [options.name = ''] 图层名称\n * @param {Boolean} [options.show = true] 图层是否显示\n * @param {BaseClass|Boolean} [options.eventParent]  指定的事件冒泡对象，默认为map对象，false时不冒泡\n * @param {Object} [options.center] 图层自定义定位视角 {@link Map#setCameraView}\n * @param {Number} options.center.lng 经度值, 180 - 180\n * @param {Number} options.center.lat 纬度值, -90 - 90\n * @param {Number} [options.center.alt] 高度值\n * @param {Number} [options.center.heading] 方向角度值，绕垂直于地心的轴旋转角度, 0-360\n * @param {Number} [options.center.pitch] 俯仰角度值，绕纬度线旋转角度, 0-360\n * @param {Number} [options.center.roll] 翻滚角度值，绕经度线旋转角度, 0-360\n * @param {Boolean} [options.flyTo] 加载完成数据后是否自动飞行定位到数据所在的区域。\n * @export\n * @class S3MLayer\n * @extends {BaseLayer}\n */\nexport class S3MLayer extends BaseLayer {\n  /**\n   * 模型对应的Cesium.S3MTilesLayer图层组\n   * @type {Object[]}\n   * @readonly\n   * @see http://support.supermap.com.cn:8090/webgl/docs/Documentation/S3MTilesLayer.html\n   */\n  get layer() {\n    return this._layerArr;\n  }\n\n  /**\n   * 设置S3M图层本身支持的参数\n   * @type {Object}\n   * @see [S3M支持的参数]{@link http://support.supermap.com.cn:8090/webgl/docs/Documentation/S3MTilesLayer.html?classFilter=S3MTilesLayer}\n   */\n  get s3mOptions() {\n    return this.options.s3mOptions;\n  }\n  set s3mOptions(value) {\n    for (let key in value) {\n      let val = value[key];\n      this.options.s3mOptions[key] = val;\n\n      if (key == \"transparentBackColor\") {\n        //去黑边，与offset互斥，注意别配置offset\n        val = Cesium.Color.fromCssColorString(val);\n      } else if (key == \"transparentBackColorTolerance\") {\n        val = Number(val);\n      }\n\n      for (let i = 0; i < this._layerArr.length; i++) {\n        let layer = this._layerArr[i];\n        if (layer == null) {\n          continue;\n        }\n        layer[key] = val;\n      }\n    }\n  }\n\n  /**\n   * 对象添加到地图前创建一些对象的钩子方法，\n   * 只会调用一次\n   * @return {void}  无\n   * @private\n   */\n  _mountedHook() {\n    //场景添加S3M图层服务\n    let promise;\n    if (this.options.layername) {\n      promise = this._map.scene.addS3MTilesLayerByScp(this.options.url, {\n        name: this.options.layername,\n        autoSetVie: this.options.flyTo,\n        cullEnabled: this.options.cullEnabled,\n      });\n    } else {\n      promise = this._map.scene.open(this.options.url, this.options.sceneName, {\n        autoSetVie: this.options.flyTo,\n      });\n    }\n\n    Cesium.when(\n      promise,\n      (smLayer) => {\n        if (Array.isArray(smLayer)) {\n          this._layerArr = smLayer;\n        } else {\n          this._layerArr = [smLayer];\n        }\n\n        //设置图层属性\n        for (let i = 0; i < this._layerArr.length; i++) {\n          let layer = this._layerArr[i];\n          if (layer == null) {\n            continue;\n          }\n\n          layer.isS3M = true; //标识下\n\n          //s3mOptions\n          if (this.options.s3mOptions) {\n            for (let key in this.options.s3mOptions) {\n              let val = this.options.s3mOptions[key];\n              if (key == \"transparentBackColor\") {\n                //去黑边，与offset互斥，注意别配置offset\n                layer[key] = Cesium.Color.fromCssColorString(val);\n              } else if (key == \"transparentBackColorTolerance\") {\n                layer[key] = Number(val);\n              } else {\n                layer[key] = this.options.s3mOptions[key];\n              }\n            }\n          }\n\n          //高度调整 offset.z\n          if (this.options?.position?.alt) {\n            layer.style3D.bottomAltitude = this.options.position.alt;\n            layer.refresh();\n          }\n        }\n\n        if (this.options.flyTo) {\n          this.flyToByAnimationEnd();\n        }\n\n        if (this.options.dataUrl) {\n          for (let i = 0; i < this._layerArr.length; i++) {\n            let ql = this._layerArr[i];\n\n            //读取子图层信息，通过数组的方式返回子图层的名称以及子图层所包含的对象的IDs\n            ql.setQueryParameter({\n              url: this.options.dataUrl,\n              dataSourceName: ql.name.split(\"@\")[1],\n              dataSetName: ql.name.split(\"@\")[0],\n              isMerge: true,\n            });\n\n            //获取图层风格\n            //Note_GJ: rgba, 1为不透明，0为全透明。已经在模型中导入材质，所以这里的颜色不特别设置\n            //var style3D = new Cesium.Style3D();\n            // var color = Cesium.Color.fromCssColorString(\"#919191\");//混泥土颜色 RGB(145, 145,145)\n            // style3D.fillForeColor = color;\n            // ql.style3D = style3D;\n            //设置后需刷新图层\n            // ql.refresh();\n            ql.selectEnabled = true;\n          }\n        }\n      },\n      (error) => {\n        this.showError(\"渲染时发生错误，已停止渲染。\", error);\n      }\n    );\n  }\n\n  /**\n   * 对象添加到地图上的创建钩子方法，\n   * 每次add时都会调用\n   * @return {void}  无\n   * @private\n   */\n  _addedHook() {\n    for (let i in this._layerArr) {\n      this._layerArr[i].visible = true;\n      this._layerArr[i].show = true;\n    }\n  }\n\n  /**\n   * 对象从地图上移除的创建钩子方法，\n   * 每次remove时都会调用\n   * @return {void}  无\n   * @private\n   */\n  _removedHook() {\n    if (this._layerArr) {\n      for (let i in this._layerArr) {\n        this._layerArr[i].visible = false;\n        this._layerArr[i].show = false;\n      }\n    }\n  }\n\n  /**\n   * 设置透明度\n   * @param {Number} value 透明度\n   * @return {void}  无\n   */\n  setOpacity(value) {\n    if (this._layerArr) {\n      for (let i = 0; i < this._layerArr.length; i++) {\n        let item = this._layerArr[i];\n        if (item == null) {\n          continue;\n        }\n\n        item.style3D.fillForeColor.alpha = value;\n      }\n    }\n  }\n\n  //定位至数据区域\n  flyTo(options = {}) {\n    if (this.options.center) {\n      this._map.setCameraView(this.options.center, options);\n    } else if (this.options.extent) {\n      this._map.flyToExtent(this.options.extent, options);\n    }\n  }\n}\nmars3d.layer.S3MLayer = S3MLayer;\n\n//注册下\nmars3d.LayerUtil.register(\"supermap_s3m\", S3MLayer);\n","import * as Cesium from \"cesium\";\nimport * as mars3d from \"mars3d\";\n\nlet BaseTileLayer = mars3d.layer.BaseTileLayer;\n\n/**\n * 超图影像瓦片服务图层,\n * 【需要引入  mars3d-supermap 插件库】\n *\n * @param {Object} [options] 参数对象，包括以下：\n * @param {String} options.url supermap的影像服务地址\n * @param {String|String[]} [options.subdomains] URL模板中用于 {s} 占位符的子域。 如果此参数是单个字符串，则字符串中的每个字符都是一个子域。如果是 一个数组，数组中的每个元素都是一个子域。\n * @param {String} [options.tileFormat] 影像图片格式，默认为png。\n * @param {Boolean} [options.transparent=true] 设置请求的地图服务的参数是否为transparent。\n * @param {String|Cesium.Color} [options.transparentBackColor] 设置影像透明色。\n * @param {Number} [options.transparentBackColorTolerance] 去黑边,设置影像透明色容限，取值范围为0.0~1.0。0.0表示完全透明，1.0表示完全不透明。\n * @param {String} [options.cacheKey] 影像的三维缓存密钥。\n *\n * @param {Number} [options.minimumLevel=0] 瓦片所支持的最低层级，如果数据没有第0层，该参数必须配置,当地图小于该级别时，平台不去请求服务数据。\n * @param {Number} [options.maximumLevel] 瓦片所支持的最大层级,大于该层级时会显示上一层拉伸后的瓦片，当地图大于该级别时，平台不去请求服务数据。\n * @param {Number} [options.minimumTerrainLevel] 展示影像图层的最小地形细节级别，小于该级别时，平台不显示影像数据。\n * @param {Number} [options.maximumTerrainLevel] 展示影像图层的最大地形细节级别，大于该级别时，平台不显示影像数据。\n * @param {Object} [options.rectangle] 瓦片数据的矩形区域范围\n * @param {Number} options.rectangle.xmin 最小经度值, -180 至 180\n * @param {Number} options.rectangle.xmax 最大纬度值, -180 至 180\n * @param {Number} options.rectangle.ymin 最小纬度值, -90 至 90\n * @param {Number} options.rectangle.ymax 最大纬度值, -90 至 90\n * @param {Number[]} [options.bbox] bbox规范的瓦片数据的矩形区域范围,与rectangle二选一即可。\n * @param {Number} [options.zIndex] 控制图层的叠加层次，默认按加载的顺序进行叠加，但也可以自定义叠加顺序，数字大的在上面。\n * @param {CRS} [options.crs=CRS.EPSG:3857] 瓦片数据的坐标系信息，默认为墨卡托投影\n * @param {ChinaCRS} [options.chinaCRS] 标识瓦片的国内坐标系（用于自动纠偏或加偏），自动将瓦片转为map对应的chinaCRS类型坐标系。\n *\n * @param {String} [options.proxy] 加载资源时要使用的代理服务url。\n * @param {Object} [options.templateValues] 一个对象，用于替换Url中的模板值的键/值对\n * @param {Object} [options.queryParameters] 一个对象，其中包含在检索资源时将发送的查询参数。比如：queryParameters: {'access_token': '123-435-456-000'},\n * @param {Object} [options.headers] 一个对象，将发送的其他HTTP标头。比如：headers: { 'X-My-Header': 'valueOfHeader' },\n * @param {Boolean} [options.enablePickFeatures=true] 如果为true，则 {@link UrlTemplateImageryProvider#pickFeatures} 请求 pickFeaturesUrl 并尝试解释响应中包含的功能。\n *        如果为 false{@link UrlTemplateImageryProvider#pickFeatures} 会立即返回未定义（表示没有可拾取的内容） 功能）而无需与服务器通信。如果您知道数据，则将此属性设置为false 源不支持选择功能，或者您不希望该提供程序的功能可供选择。注意 可以通过修改 {@link UriTemplateImageryProvider#enablePickFeatures}来动态覆盖 属性。\n * @param {Cesium.GetFeatureInfoFormat[]} [options.getFeatureInfoFormats] 在某处获取功能信息的格式 调用 {@link UrlTemplateImageryProvider#pickFeatures} 的特定位置。如果这 参数未指定，功能选择已禁用。\n *\n * @param {Number} [options.opacity = 1.0] 透明度，取值范围：0.0-1.0。\n * @param {Number|Function} [options.alpha=1.0] 同opacity。\n * @param {Number|Function} [options.nightAlpha=1.0] 当 enableLighting 为 true 时 ，在地球的夜晚区域的透明度，取值范围：0.0-1.0。\n * @param {Number|Function} [options.dayAlpha=1.0]  当 enableLighting 为 true 时，在地球的白天区域的透明度，取值范围：0.0-1.0。\n * @param {Number|Function} [options.brightness=1.0] 亮度\n * @param {Number|Function} [options.contrast=1.0] 对比度。 1.0使用未修改的图像颜色，小于1.0会降低对比度，而大于1.0则会提高对比度。\n * @param {Number|Function} [options.hue=0.0] 色调。 0.0 时未修改的图像颜色。\n * @param {Number|Function} [options.saturation=1.0] 饱和度。 1.0使用未修改的图像颜色，小于1.0会降低饱和度，而大于1.0则会增加饱和度。\n * @param {Number|Function} [options.gamma=1.0] 伽马校正值。 1.0使用未修改的图像颜色。\n * @param {Number} [options.maximumAnisotropy=maximum supported] 使用的最大各向异性水平 用于纹理过滤。如果未指定此参数，则支持最大各向异性 将使用WebGL堆栈。较大的值可使影像在水平方向上看起来更好 视图。\n * @param {Cesium.Rectangle} [options.cutoutRectangle] 制图矩形，用于裁剪此ImageryLayer的一部分。\n * @param {Cesium.Color} [options.colorToAlpha]  用作Alpha的颜色。\n * @param {Number} [options.colorToAlphaThreshold=0.004] 颜色到Alpha的阈值。\n * @param {Boolean} [options.hasAlphaChannel=true] 如果此图像提供者提供的图像为真 包括一个Alpha通道；否则为假。如果此属性为false，则为Alpha通道，如果 目前，将被忽略。如果此属性为true，则任何没有Alpha通道的图像都将 它们的alpha随处可见。当此属性为false时，内存使用情况 和纹理上传时间可能会减少。\n * @param {Number} [options.tileWidth=256] 图像图块的像素宽度。\n * @param {Number} [options.tileHeight=256] 图像图块的像素高度。\n * @param {Object} [options.customTags] 允许替换网址模板中的自定义关键字。该对象必须具有字符串作为键，并且必须具有值。\n *\n * @param {String|Number} [options.id = uuid()] 图层id标识\n * @param {String|Number} [options.pid = -1] 图层父级的id，一般图层管理中使用\n * @param {String} [options.name = ''] 图层名称\n * @param {Boolean} [options.show = true] 图层是否显示\n * @param {BaseClass|Boolean} [options.eventParent]  指定的事件冒泡对象，默认为map对象，false时不冒泡\n * @param {Object} [options.center] 图层自定义定位视角 {@link Map#setCameraView}\n * @param {Number} options.center.lng 经度值, 180 - 180\n * @param {Number} options.center.lat 纬度值, -90 - 90\n * @param {Number} [options.center.alt] 高度值\n * @param {Number} [options.center.heading] 方向角度值，绕垂直于地心的轴旋转角度, 0-360\n * @param {Number} [options.center.pitch] 俯仰角度值，绕纬度线旋转角度, 0-360\n * @param {Number} [options.center.roll] 翻滚角度值，绕经度线旋转角度, 0-360\n * @param {Boolean} [options.flyTo] 加载完成数据后是否自动飞行定位到数据所在的区域。\n * @export\n * @class SmImgLayer\n * @extends {BaseTileLayer}\n *\n * @see http://support.supermap.com.cn:8090/webgl/docs/Documentation/SuperMapImageryProvider.html?classFilter=SuperMapImageryProvider\n */\nexport class SmImgLayer extends BaseTileLayer {\n  //构建ImageryProvider\n  _createImageryProvider(options) {\n    return createImageryProvider(options);\n  }\n  //添加时\n  _addedHook() {\n    super._addedHook();\n\n    if (Cesium.defined(this.options.transparentBackColor)) {\n      this._imageryLayer.transparentBackColor = mars3d.Util.getCesiumColor(this.options.transparentBackColor);\n      this._imageryLayer.transparentBackColorTolerance = this.options.transparentBackColorTolerance; //去黑边\n    }\n  }\n}\nfunction createImageryProvider(options) {\n  options = mars3d.LayerUtil.converOptions(options);\n\n  if (options.url instanceof Cesium.Resource) options.url = options.url.url;\n\n  if (Cesium.defined(options.transparentBackColor)) {\n    delete options.transparentBackColor;\n    delete options.transparentBackColorTolerance;\n  }\n  return new Cesium.SuperMapImageryProvider(options);\n}\n\n/**\n * 创建用于图层的 ImageryProvider对象\n *\n * @param {Object} options Provider参数，同图层构造参数。\n * @return {Cesium.ImageryProvider} ImageryProvider类\n * @function\n */\nSmImgLayer.createImageryProvider = createImageryProvider;\n\nmars3d.layer.SmImgLayer = SmImgLayer;\n\n//注册下\nconst layerType = \"supermap_img\";\nmars3d.LayerUtil.register(layerType, SmImgLayer);\nmars3d.LayerUtil.registerImageryProvider(layerType, createImageryProvider);\n","import * as Cesium from \"cesium\";\nimport * as mars3d from \"mars3d\";\n\nlet BaseLayer = mars3d.layer.BaseLayer;\n\n/**\n * 超图MVT矢量瓦片图层,\n * 【需要引入  mars3d-supermap 插件库】\n *\n * @param {Object} [options] 参数对象，包括以下：\n * @param {String} options.url 适用于通过SuperMap桌面软件生成mvt数据,经iServer发布为rest风格的地图服务，只需提供服务地址。\n * @param {String} options.layer 图层名称,适用于第三方发布的WMTS服务。\n * @param {Number} [options.canvasWidth] 用来绘制矢量的纹理边长。默认是512，越大越精细，越小性能越高。\n * @param {String} [options.format='mvt'] 适用于第三方发布的WMTS服务。\n * @param {Object} [options.mapboxStyle] 使用的mapBox风格。\n * @param {Object} [options.多个参数] 参考[supermap官方API]{@link http://support.supermap.com.cn:8090/webgl/docs/Documentation/Scene.html#addVectorTilesLayer}\n *\n *\n * @param {String|Number} [options.id = uuid()] 图层id标识\n * @param {String|Number} [options.pid = -1] 图层父级的id，一般图层管理中使用\n * @param {String} [options.name = ''] 图层名称\n * @param {Boolean} [options.show = true] 图层是否显示\n * @param {BaseClass|Boolean} [options.eventParent]  指定的事件冒泡对象，默认为map对象，false时不冒泡\n * @param {Object} [options.center] 图层自定义定位视角 {@link Map#setCameraView}\n * @param {Number} options.center.lng 经度值, 180 - 180\n * @param {Number} options.center.lat 纬度值, -90 - 90\n * @param {Number} [options.center.alt] 高度值\n * @param {Number} [options.center.heading] 方向角度值，绕垂直于地心的轴旋转角度, 0-360\n * @param {Number} [options.center.pitch] 俯仰角度值，绕纬度线旋转角度, 0-360\n * @param {Number} [options.center.roll] 翻滚角度值，绕经度线旋转角度, 0-360\n * @param {Boolean} [options.flyTo] 加载完成数据后是否自动飞行定位到数据所在的区域。\n * @export\n * @class SmMvtLayer\n * @extends {BaseLayer}\n */\nexport class SmMvtLayer extends BaseLayer {\n  /**\n   * 对应的supermap图层 Cesium.VectorTilesLayer\n   * @type {*}\n   * @readonly\n   * @see http://support.supermap.com.cn:8090/webgl/docs/Documentation/VectorTilesLayer.html\n   */\n  get layer() {\n    return this._mvtLayer;\n  }\n\n  /**\n   * 对象添加到地图前创建一些对象的钩子方法，\n   * 只会调用一次\n   * @return {void}  无\n   * @private\n   */\n  _mountedHook() {\n    //options参考API文档：http://support.supermap.com.cn:8090/webgl/docs/Documentation/Scene.html\n    this._mvtLayer = this._map.scene.addVectorTilesMap(this.options);\n    let layerReadyPromise = this._mvtLayer.readyPromise;\n\n    Cesium.when(\n      layerReadyPromise,\n      (data) => {\n        //setPaintProperty(layerId, name, value, options)\n        // for(var layerId in that.options.style){\n        //     that._mvtLayer.setPaintProperty(layerId, \"fill-color\", \"rgba(255,0,0,0.8)\");\n        // }\n      },\n      (error) => {\n        this.showError(\"渲染时发生错误，已停止渲染。\", error);\n      }\n    );\n\n    let scene = this._map.scene;\n    let handler = new Cesium.ScreenSpaceEventHandler(scene.canvas);\n    handler.setInputAction((event) => {\n      if (!this.show) {\n        return;\n      }\n\n      let position = mars3d.PointUtil.getCurrentMousePosition(scene, event.position);\n\n      //查询出相交图层的feature\n      let features = this._mvtLayer.queryRenderedFeatures([position], {\n        // layers: [selectLayer.id]\n      });\n\n      let filter = features.reduce(\n        (memo, result) => {\n          let attr = result.feature.properties;\n          if (!attr) {\n            return;\n          }\n\n          let content = mars3d.Util.getPopupForConfig(this.options, attr);\n          let item = {\n            data: attr,\n            event: event,\n          };\n          this._map.openPopup(position, content, item);\n        },\n        [\"in\", \"$id\"]\n      );\n    }, Cesium.ScreenSpaceEventType.LEFT_CLICK);\n\n    this.handler = handler;\n  }\n\n  /**\n   * 对象添加到地图上的创建钩子方法，\n   * 每次add时都会调用\n   * @return {void}  无\n   * @private\n   */\n  _addedHook() {\n    this._mvtLayer.show = true;\n    // this._mvtLayer.refresh();\n  }\n\n  /**\n   * 对象从地图上移除的创建钩子方法，\n   * 每次remove时都会调用\n   * @return {void}  无\n   * @private\n   */\n  _removedHook() {\n    if (this._mvtLayer) {\n      this._mvtLayer.show = false;\n    }\n  }\n\n  /**\n   * 设置透明度\n   * @param {Number} value 透明度\n   * @return {void}  无\n   */\n  setOpacity(value) {\n    if (this._mvtLayer) {\n      this._mvtLayer.alpha = parseFloat(value);\n    }\n  }\n\n  //定位至数据区域\n  flyTo(options = {}) {\n    if (this.options.center) {\n      this._map.setCameraView(this.options.center, options);\n    } else if (this.options.extent) {\n      this._map.flyToExtent(this.options.extent, options);\n    } else if (this._mvtLayer) {\n      this._map.camera.flyTo({\n        ...options,\n        destination: this._mvtLayer.rectangle,\n      });\n    }\n  }\n}\nmars3d.layer.SmMvtLayer = SmMvtLayer;\n\n//注册下\nmars3d.LayerUtil.register(\"supermap_mvt\", SmMvtLayer);\n","export { S3MLayer } from \"./supermap/S3MLayer\";\nexport { SmImgLayer } from \"./supermap/SmImgLayer\";\nexport { SmMvtLayer } from \"./supermap/SmMvtLayer\";\n"],"sourceRoot":""}